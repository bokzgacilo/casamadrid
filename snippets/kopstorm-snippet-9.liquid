{{ 'kopstorm_combine.css' | asset_url | stylesheet_tag }}
<div id="kopstorm-snippet-9">
  <style>
    #green_message, #orange_message {
      display: none;
    }
      #cta_button
    {
      display:none;
    }
    #klaviyo_trigger
    {
      display:none !important;
    }
    /* #klaviyo_trigger{
      display:block;
    }
     #cta_button
    {
      display:none;
    }
     #cta_button_new
    {
      display:block;
    }
    #cta_button_new
    {
      display:block;
    } */
  </style>

  <span style="display:none;">0</span>

  <div class="tooltip_wrapper_kopstorm">
    <img width="20" height="20" src="https://cdn.shopify.com/s/files/1/2707/0176/files/back_1.svg?v=1734463291">
    <div class="tooltip_wrapper">
      <span>14 días de garantía de devolución</span>
      <div class="tooltip_trigger">
        <svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M7 0.5C5.71442 0.5 4.45772 0.881218 3.3888 1.59545C2.31988 2.30968 1.48676 3.32484 0.994786 4.51256C0.502816 5.70028 0.374095 7.00721 0.624899 8.26809C0.875703 9.52896 1.49477 10.6872 2.40381 11.5962C3.31285 12.5052 4.47104 13.1243 5.73192 13.3751C6.99279 13.6259 8.29973 13.4972 9.48744 13.0052C10.6752 12.5132 11.6903 11.6801 12.4046 10.6112C13.1188 9.54229 13.5 8.28558 13.5 7C13.4967 5.27711 12.8108 3.62573 11.5925 2.40746C10.3743 1.18918 8.72289 0.503304 7 0.5ZM6.875 3.5C7.02334 3.5 7.16834 3.54399 7.29168 3.6264C7.41502 3.70881 7.51115 3.82594 7.56791 3.96299C7.62468 4.10003 7.63953 4.25083 7.61059 4.39632C7.58165 4.5418 7.51022 4.67544 7.40533 4.78033C7.30044 4.88522 7.16681 4.95665 7.02132 4.98559C6.87583 5.01453 6.72503 4.99968 6.58799 4.94291C6.45095 4.88614 6.33381 4.79001 6.2514 4.66668C6.16899 4.54334 6.125 4.39834 6.125 4.25C6.125 4.05109 6.20402 3.86032 6.34467 3.71967C6.48532 3.57902 6.67609 3.5 6.875 3.5ZM7.5 10.5H7C6.86739 10.5 6.74022 10.4473 6.64645 10.3536C6.55268 10.2598 6.5 10.1326 6.5 10V7C6.36739 7 6.24022 6.94732 6.14645 6.85355C6.05268 6.75979 6 6.63261 6 6.5C6 6.36739 6.05268 6.24021 6.14645 6.14645C6.24022 6.05268 6.36739 6 6.5 6H7C7.13261 6 7.25979 6.05268 7.35356 6.14645C7.44732 6.24021 7.5 6.36739 7.5 6.5V9.5C7.63261 9.5 7.75979 9.55268 7.85356 9.64645C7.94732 9.74021 8 9.86739 8 10C8 10.1326 7.94732 10.2598 7.85356 10.3536C7.75979 10.4473 7.63261 10.5 7.5 10.5Z" fill="#000000" fill-opacity="1"></path>
        </svg>
        <div class="tooltip_text">
          <p>Ofrecemos una política de cambio o devolución de 14 días si no está satisfecho con su pedido por cualquier motivo.</p>
        </div>
      </div>
    </div>
  </div>

<div id="green_message" class="flex-div-wrapper" style="display: none;">
  <div class="flex-div">
    <span style="margin-right: 14px; margin-left: 3px;" class="green-dot"></span>
    <span style="color:#2c9814;">En stock, listo para enviar</span>
  </div>
</div>

<div id="orange_message" class="flex-div-wrapper" style="display: none;">
  <div class="flex-div">
    <span style="margin-right: 14px; margin-left: 3px;" class="orange_pulse"></span>
    <span style="color:#fa8c18;">¡Quedan pocas unidades!</span>
  </div>
</div>

<div id="preorder_message" class="flex-div-wrapper" style="display: flex;">
  <div class="flex-div">
    <span style="margin-right: 14px; margin-left: 3px;" class="red_pulse"></span>
    <span class="text" style="color:#d90000;">
      Debido al <strong>cierre</strong>, ¡solo quedan
      <span id="random_numbers" style="font-weight: bold;"></span> en stock!
    </span>
  </div>
</div>

    </div>
  </div>
</div>
<script>
  // Retrieve previous inventory count from local storage
  let inventoryCount = localStorage.getItem('inventoryCount');

  if (!inventoryCount || inventoryCount <= 2) {
      inventoryCount = 9; // Reset to 9 when reaching 2 or on first load
  } else {
      inventoryCount--; // Decrease by 1 on refresh
  }

  // Store updated inventory count in local storage
  localStorage.setItem('inventoryCount', inventoryCount);

  // Display the inventory count
  document.getElementById('random_numbers').textContent = inventoryCount;
</script>
